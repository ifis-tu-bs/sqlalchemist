
<div class="container-fluid">
  <div ng-class="{ 'alert': flash, 'alert-success': flash.type === 'success', 'alert-danger': flash.type === 'error' }" ng-if="flash" ng-bind="flash.message"></div>
  <div ng-show="vm.error" class="alert alert-danger">{{vm.error}}</div>

  <div class="btn-group" style="float:left;width:70%">
    <button type="button" class="btn btn-default" ng-click="goSelectTaskSet()" ng-show="shouldIBeDisplayed('TaskSetSelection')"> > </button>
    <button type="button" class="btn btn-default" ng-click="goSelectTask()" ng-show="shouldIBeDisplayed('TaskSelection')" ng-disabled="state === 'TaskFileSelection'">TaskSet: <b>{{selectedTaskSet.taskSetName}}</b></button>
    <button type="button" class="btn btn-default" ng-click="goSelectSubmit()" ng-show="shouldIBeDisplayed('InspectTask')" ng-disabled="state === 'InspectSubmit'">Task: <b>{{selectedTask.taskName</b></button>
  </div>

  <div class="container-fluid" style="float:right;width:30%">
    <form ng-show="!shouldIBeDisplayed('InspectTask')">
      <div class="form-group">
        <div class="input-group">
          <div class="input-group-addon"><span class="glyphicon glyphicon-search"></span></div>
          <input type="text" class="form-control" placeholder="Search..." ng-model="search">
        </div>
      </div>
    </form>
  </div>

  <div style="width:100%;height:8px;float:right"></div>

  <div class="ng-hide" ng-show="state === 'TaskSetSelection'" style="width:100%;float:right">
    <table class="table table-hover">
      <thead>
      <tr>
        <th ng-click="orderTaskSetPredicate = 'taskSetName'; orderReverse = !orderReverse" style="cursor: pointer">Name</th>

        <th>View Schema...</th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="taskSet in vm.taskSets | orderBy:orderTaskSetPredicate:orderReverse | filter:search" style="cursor: pointer" ng-click="selectTaskSet(taskSet)">
        <td>{{taskSet.name}}</td>
        <td>Schema...</td>
        <!--<td>{{taskSet.start_at}}</td>
        <td>{{taskSet.expires_at}}</td>
        <td>
          <button type="button" class="btn btn-default" ng-click="deleteHomework(taskSet);  $event.stopPropagation();">
            <span class="glyphicon glyphicon-trash"></span></button>
        </td>-->
      </tr>
      </tbody>
    </table>
  </div>

  <div class="ng-hide" ng-show="state === 'TaskSelection'" style="width:100%;float:right">

    <table class="table table-hover">
      <thead>
      <tr>
        <th ng-click="orderTaskPredicate = 'id'; orderReverse = !orderReverse" style="cursor: pointer">ID</th>
        <th ng-click="orderTaskPredicate = 'taskName'; orderReverse = !orderReverse" style="cursor: pointer">Name</th>
        <th ng-click="orderTaskPredicate = 'creator'; orderReverse = !orderReverse" style="cursor: pointer">Created by</th>
        <th ng-click="orderTaskPredicate = 'created_at'; orderReverse = !orderReverse" style="cursor: pointer">Created at</th>
        <th ng-click="orderTaskPredicate = 'rating.positive'; orderReverse = !orderReverse" style="cursor: pointer">Rating</th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="task in vm.tasks | orderBy:orderTaskPredicate:orderReverse | filter:search" style="cursor: pointer" ng-click="selectTask(task)">
        <td>{{ task.id }}</td>
        <td>{{ task.taskName}}</td>
        <td>{{ task.creator }}</td>
        <td>{{ task.created_at }}</td>
        <td>
          <div class="btn-group" role="group" aria-label="...">
            <a href="" ng-click="rateTask(task, 'positive');  $event.stopPropagation();"> <span class="glyphicon glyphicon-thumbs-up"></span> </a> <span style="width: 2px"></span> {{ task.rating.positive }} <span style="width: 6px"></span>
            <a href="" ng-click="rateTask(task, 'needReview');  $event.stopPropagation();"> <span class="glyphicon glyphicon-search"></span> </a> <span style="width: 2px"></span> {{ task.rating.needReview }} <span style="width: 6px"></span>
            <a href="" ng-click="rateTask(task, 'negative');  $event.stopPropagation();"> <span class="glyphicon glyphicon-thumbs-down"></span> </a> <span style="width: 2px"></span> {{ task.rating.negative }}
          </div>
        </td>
      </tr>
      </tbody>
    </table>

  </div>

  <div class="ng-hide" ng-show="state === 'InspectTask'"  style="width:100%;float:right">
    <div style="width:100%;height: 8px"> </div>
    <div style="width:45%; float:left">
      <button class="btn btn-default" ng-click="prevSubmit()" style="float:left">Previous Student</button>
      <label style="float:right">Student's Statement:</label>
    </div>
    <div style="width:45%; float:right">
      <label style="float:left">Reference Statement:</label>
      <button class="btn btn-default" ng-click="nextSubmit()" style="float:right">Next Student</button>
    </div>
    <div style="width:45%; float:left">
      <textarea  ui-codemirror="codemirrorOptions" id="CodeMirrorSQLUser" ng-model="selectedSubmit.statement" style="resize:none; width:100%"></textarea>
    </div>
    <div style="width:45%; float:right">
      <textarea  ui-codemirror="codemirrorOptions" id="CodeMirrorSQLRef" ng-model="selectedSubTask.refStatement" style="resize:none; width:100%"></textarea>

    </div>
  </div>
</div>
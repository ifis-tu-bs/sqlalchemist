<?xml version="1.0" encoding="UTF-8"?>

<tasks schemaversion="1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="tasks.xsd">

  <task taskid="Alechmistic_Animal_Stuff" querylanguage="SQL"><!--querylanguage one of [SQL]-->

    <titles>
      <title language="EN">No title yet.</title>
    </titles>

    <flufftexts>
      <flufftext language="EN">No text yet.</flufftext><!--(optional)-->
    </flufftexts>

    <schema>
      <relation>
        <intension>CREATE TABLE Animal(name varchar(100) not null primary key, colour varchar(100), size int, poisonous boolean, pet boolean, maxage int);</intension>
        <extension>
          <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Unicorn', 'white', 170, false, false, NULL);</tuple>
		  <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Flubberworm', 'brown', 8, false, true, 2);</tuple>
		  <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Newt', 'brown', 12, false, false, 3);</tuple>
		  <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Pegasus', 'white', 210, false, false, 132);</tuple>
		  <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Hippogriff', 'different', 190, false, false, 150);</tuple>
		  <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Sphinx', 'gold', 150, false, false, NULL);</tuple>
		  <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Owl', 'different', 45, false, true, 18);</tuple>
		  <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Spider', 'black', 2, true, false, 2);</tuple>
		  <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Basilisk', 'green', 7000, true, false, NULL);</tuple>
		  <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Cat', 'different', 45, false, true, 19);</tuple>
		  <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Rat', 'different', 15, false, true, 6);</tuple>
		  <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Toad', 'green', 20, false, true, 5);</tuple>
		  <tuple>INSERT INTO Animal(name, colour, size, poisonous, pet, maxage) VALUES ('Dragon', 'different', 6500, false, false, 450);</tuple>
		  </extension>
          <!--
        <extensiongeneration>
          <generationtuple>7;none;max,int,235;random,colour,80;random,colour;random,int</generationtuple>
        </extensiongeneration> -->
      </relation>
      <relation>
      	<intension>CREATE TABLE Power(name varchar(100) not null primary key, description varchar(300), effect varchar(100));</intension>
      	<extension>
      		<tuple>INSERT INTO Power(name, description, effect) VALUES ('flying', 'This animal can fly.', 'No effect on someone else.');</tuple>
			<tuple>INSERT INTO Power(name, description, effect) VALUES ('killing', 'This animal can kill you.', 'Death.');</tuple>
			<tuple>INSERT INTO Power(name, description, effect) VALUES ('biting', 'This animal can bite you with its teeth.', 'It can seriously hurt or injure you.');</tuple>
			<tuple>INSERT INTO Power(name, description, effect) VALUES ('immortality', 'This animal does not die from age, but some can be killed.', 'No effects on someone else.');</tuple>
      	</extension> <!--
        <extensiongeneration>
          <generationtuple>10;none;max,int,100;random,effect,80;random,string,200</generationtuple>
        </extensiongeneration> -->
      </relation>
      <relation>
      	<intension>CREATE TABLE Animal_has_Power(animal varchar(100) not null, power varchar(100) not null, PRIMARY KEY(animal, power), FOREIGN KEY (animal) REFERENCES Animal(name), FOREIGN KEY (power) REFERENCES Power(name));</intension>
      	<extension>
      		<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Unicorn', 'immortality');</tuple>
			<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Sphinx', 'immortality');</tuple>
			<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Basilisk', 'killing');</tuple>
			<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Spider', 'killing');</tuple>
			<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Pegasus', 'flying');</tuple>
			<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Owl', 'flying');</tuple>
			<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Hippogriff', 'flying');</tuple>
			<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Cat', 'biting');</tuple>
			<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Rat', 'biting');</tuple>
			<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Hippogriff', 'biting');</tuple>
			<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Owl', 'biting');</tuple>
			<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Dragon', 'flying');</tuple>
			<tuple>INSERT INTO Animal_has_Power(animal, power) VALUES ('Dragon', 'killing');</tuple>
      	</extension> <!--
        <extensiongeneration>
          <generationtuple>span,0,5;none;random,fullname;ref,powders,id</generationtuple>
        </extensiongeneration> -->
      </relation>
      <relation>
      	<intension>CREATE TABLE COUNTRY(name varchar(100) not null primary key, continent varchar(100), language varchar(100));</intension>
      	<extension>
            <tuple>INSERT INTO COUNTRY (name, continent, language) VALUES ('United Kingdom', 'Europe', 'English');</tuple>
			<tuple>INSERT INTO COUNTRY (name, continent, language) VALUES ('Germany', 'Europe', 'German');</tuple>
			<tuple>INSERT INTO COUNTRY (name, continent, language) VALUES ('Poland', 'Europe', 'Polish');</tuple>
			<tuple>INSERT INTO COUNTRY (name, continent, language) VALUES ('Hungary', 'Europe', 'Hungarian');</tuple>
			<tuple>INSERT INTO COUNTRY (name, continent, language) VALUES ('Canada', 'North America', 'English');</tuple>
			<tuple>INSERT INTO COUNTRY (name, continent, language) VALUES ('Thailand', 'Asia', 'Thai');</tuple>
			<tuple>INSERT INTO COUNTRY (name, continent, language) VALUES ('Australia', 'Australia', 'English');</tuple>
			<tuple>INSERT INTO COUNTRY (name, continent, language) VALUES ('Switzerland', 'Europe', 'German');</tuple>
			<tuple>INSERT INTO COUNTRY (name, continent, language) VALUES ('Spain', 'Europe', 'Spanish');</tuple>
			<tuple>INSERT INTO COUNTRY (name, continent, language) VALUES ('Egypt', 'Africa', 'Egyptian');</tuple>
        </extension><!--
        <extensiongeneration>
          <generationtuple>5;refAll,powders,id;ref,powders,id;ref,effects,id;max,int,200</generationtuple>
        </extensiongeneration> -->
      </relation>
	   <relation>
      	<intension>CREATE TABLE Animal_from_Country(animal varchar(100) not null, country varchar(100) not null, PRIMARY KEY(animal, country), FOREIGN KEY (animal) REFERENCES Animal(name), FOREIGN KEY (country) REFERENCES Country(name));</intension>
      	<extension>
      		<tuple>INSERT INTO Animal_from_Country(animal, country) VALUES ('Unicorn', 'United Kingdom');</tuple>
			<tuple>INSERT INTO Animal_from_Country(animal, country) VALUES ('Unicorn', 'Poland');</tuple>
			<tuple>INSERT INTO Animal_from_Country(animal, country) VALUES ('Unicorn', 'Canada');</tuple>
			<tuple>INSERT INTO Animal_from_Country(animal, country) VALUES ('Basilisk', 'Thailand');</tuple>
			<tuple>INSERT INTO Animal_from_Country(animal, country) VALUES ('Basilisk', 'Australia');</tuple>
			<tuple>INSERT INTO Animal_from_Country(animal, country) VALUES ('Owl', 'United Kingdom');</tuple>
			<tuple>INSERT INTO Animal_from_Country(animal, country) VALUES ('Dragon', 'Hungary');</tuple>
			<tuple>INSERT INTO Animal_from_Country(animal, country) VALUES ('Rat', 'Spain');</tuple>
			<tuple>INSERT INTO Animal_from_Country(animal, country) VALUES ('Rat', 'Egypt');</tuple>
			<tuple>INSERT INTO Animal_from_Country(animal, country) VALUES ('Flubberworm', 'Hungary');</tuple>
			<tuple>INSERT INTO Animal_from_Country(animal, country) VALUES ('Flubberworm', 'Poland');</tuple>
			<tuple>INSERT INTO Animal_from_Country(animal, country) VALUES ('Hippogriff', 'Germany');</tuple>
      	</extension><!--
        <extensiongeneration>
          <generationtuple>span,0,5;none;random,fullname;ref,powders,id</generationtuple>
        </extensiongeneration> -->
      </relation>
    </schema>

    <subtasks>
      <subtask>
        <subtaskid>1</subtaskid>
        <tasktexts>
          <tasktext language="EN">Give the names of the animals with the colour brown.</tasktext>
        </tasktexts>
        <solution>
          <referencestatement>
                SELECT name
                FROM Animal
				WHERE colour='brown';
          </referencestatement>
          <evaluationstrategy>SET</evaluationstrategy>
        </solution>
        <points>1</points>
	  </subtask>
	  <subtask>
		<subtaskid>2</subtaskid>
        <tasktexts>
          <tasktext language="EN">Give the names and colours of the animals, that are not poisonous and smaller than 100 cm.</tasktext>
        </tasktexts>
        <solution>
          <referencestatement>
                SELECT name, colour
                FROM Animal
				WHERE poisonous=false
				AND size&lt;100;
          </referencestatement>
          <evaluationstrategy>SET</evaluationstrategy>
        </solution>
        <points>1</points>
      </subtask>
      <subtask>
        <subtaskid>3</subtaskid>
        <tasktexts>
          <tasktext language="EN">Give the name and the maximun age of all animals, that can fly and are pet animals.</tasktext>
        </tasktexts>
        <solution>
          <referencestatement>
          SELECT Animal.name, Animal.maxage
          FROM Animal
            JOIN Animal_has_Power ON Animal_has_Power.animal=Animal.name
            WHERE Animal_has_Power.power='flying'
            AND Animal.pet=true;
          </referencestatement>
          <evaluationstrategy>SET</evaluationstrategy>
        </solution>
        <points>2</points>
	  </subtask>
      <subtask>
        <subtaskid>4</subtaskid>
        <tasktexts>
          <tasktext language="EN">Give all animals and countries, that come from the countries where the national language is english and in addition to that are green.</tasktext>
        </tasktexts>
        <solution>
          <referencestatement>
          SELECT Animal.name, Country.name
          FROM Animal
            JOIN Animal_from_Country ON Animal_from_Country.animal=Animal.name
            JOIN Country ON Country.name=Animal_from_Country.country
          WHERE Country.language='English'
          AND Animal.colour='green';
          </referencestatement>
          <evaluationstrategy>SET</evaluationstrategy>
        </solution>
        <points>2</points>
	  </subtask>
      <subtask>
        <subtaskid>5</subtaskid>
        <tasktexts>
          <tasktext language="EN">What is the average maximum age of the animals?</tasktext>
        </tasktexts>
        <solution>
          <referencestatement>
          SELECT AVG(maxage)
          FROM Animal
          WHERE maxage IS NOT NULL;
          </referencestatement>
          <evaluationstrategy>SET</evaluationstrategy>
        </solution>
        <points>3</points>
	  </subtask>
      <subtask>
        <subtaskid>6</subtaskid>
        <tasktexts>
          <tasktext language="EN">Name all animals, that come from more than one country.</tasktext>
        </tasktexts>
        <solution>
          <referencestatement>
          SELECT animal, COUNT(*) AS amount
          FROM Animal_from_Country
          GROUP BY animal
          HAVING COUNT(*);
          </referencestatement>
          <evaluationstrategy>SET</evaluationstrategy>
        </solution>
        <points>1</points>
	  </subtask>
    </subtasks>
  </task>
</tasks>